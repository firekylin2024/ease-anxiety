<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>心安处</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            text-align: center;
            max-width: 500px;
            width: 100%;
        }
        
        .title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
            letter-spacing: 2px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 40px;
        }
        
        .card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            background: rgba(255,255,255,0.15);
            transform: translateY(-5px);
        }
        
        .card h3 {
            font-size: 1.4rem;
            margin-bottom: 15px;
            font-weight: 400;
        }
        
        .card p {
            font-size: 1rem;
            opacity: 0.9;
            line-height: 1.5;
            margin-bottom: 20px;
        }
        
        .btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin: 5px;
        }
        
        .btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
        
        .affirmation {
            font-size: 1.3rem;
            font-weight: 300;
            line-height: 1.6;
            margin: 20px 0;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
        }
        
        .breathing-circle {
            width: 100px;
            height: 100px;
            border: 3px solid rgba(255,255,255,0.6);
            border-radius: 50%;
            margin: 20px auto;
            animation: breathe 4s infinite ease-in-out;
        }
        
        @keyframes breathe {
            0%, 100% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.2); opacity: 1; }
        }
        
        .music-control {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            border-radius: 50px;
            padding: 10px 15px;
            backdrop-filter: blur(10px);
        }
        
        .music-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            margin: 0 5px;
        }
        
        .hidden { display: none; }
        
        @media (max-width: 600px) {
            .title { font-size: 2rem; }
            .card { padding: 20px; margin-bottom: 15px; }
        }
    </style>
</head>
<body>
    <!-- 音乐控制 -->
    <div class="music-control">
        <button class="music-btn" onclick="toggleMusic()">🎵</button>
        <span id="musicStatus">点击播放</span>
    </div>
    
    <!-- 主容器 -->
    <div class="container">
        <!-- 欢迎页面 -->
        <div id="welcome">
            <h1 class="title">心安处</h1>
            <p class="subtitle">让心灵找到片刻宁静</p>
            
            <div class="card" onclick="showOptions()">
                <h3>🌸 开始放松之旅</h3>
                <p>在这里，你可以找到内心的平静</p>
                <button class="btn">点击开始</button>
            </div>
        </div>
        
        <!-- 选择页面 -->
        <div id="options" class="hidden">
            <h2 style="margin-bottom: 30px;">你希望...</h2>
            
            <div class="card" onclick="showAffirmations()">
                <h3>💚 获得正能量</h3>
                <p>一些温暖的话语，给心灵力量</p>
            </div>
            
            <div class="card" onclick="showBreathing()">
                <h3>🫁 深呼吸放松</h3>
                <p>跟随节拍，让身心慢下来</p>
            </div>
            
            <div class="card" onclick="showMusic()">
                <h3>🎵 听音乐冥想</h3>
                <p>在轻柔的音乐中找到宁静</p>
            </div>
            
            <button class="btn" onclick="goBack()">← 返回</button>
        </div>
        
        <!-- 正能量页面 -->
        <div id="affirmations" class="hidden">
            <h2 style="margin-bottom: 20px;">✨ 给自己一些鼓励</h2>
            <div class="affirmation" id="affirmationText">
                你已经很努力了，给自己一个温暖的拥抱吧
            </div>
            <button class="btn" onclick="nextAffirmation()">下一句</button>
            <button class="btn" onclick="goBack()">← 返回</button>
        </div>
        
        <!-- 呼吸页面 -->
        <div id="breathing" class="hidden">
            <h2 style="margin-bottom: 20px;">🫁 深呼吸练习</h2>
            <p>跟随圆圈的节拍，慢慢呼吸</p>
            <div class="breathing-circle"></div>
            <p><strong>吸气 4 秒 → 屏息 4 秒 → 呼气 6 秒</strong></p>
            <button class="btn" onclick="goBack()">← 返回</button>
        </div>
        
        <!-- 音乐页面 -->
        <div id="music" class="hidden">
            <h2 style="margin-bottom: 20px;">🎵 音乐冥想</h2>
            <p>闭上眼睛，让音乐带走烦恼</p>
            <div style="margin: 30px 0;">
                <div style="font-size: 4rem; margin-bottom: 20px;">🎼</div>
                <p>建议冥想 5-10 分钟</p>
                <p style="font-size: 0.9rem; opacity: 0.8; margin-top: 10px;" id="currentTrack">
                    准备播放轻音乐
                </p>
            </div>
            <button class="btn" onclick="toggleMusic()">播放/暂停</button>
            <button class="btn" onclick="nextTrack()">下一首</button>
            <button class="btn" onclick="goBack()">← 返回</button>
        </div>
    </div>
    
    <!-- 隐藏音频 -->
    <audio id="bgAudio" loop>
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+jypoQfCS1+xLnp7e2" type="audio/wav">
    </audio>
    
    <script>
        // 简化的状态管理
        let currentPage = 'welcome';
        let isPlaying = false;
        
        // 正能量语句
        const affirmations = [
            "你已经很努力了，给自己一个温暖的拥抱吧",
            "每一个今天，都是全新的开始",
            "你比想象中更坚强，更有韧性",
            "慢下来，生活会给你答案",
            "此刻的你，已经足够好了",
            "困难只是成长路上的垫脚石",
            "你值得被爱，被理解，被温柔对待",
            "在这个当下，一切都是最好的安排",
            "相信自己，你有无限的可能性",
            "每一次深呼吸，都在为心灵充电"
        ];
        
        let currentAffirmation = 0;
        
        // 页面切换
        function showPage(pageId) {
            document.querySelectorAll('.container > div').forEach(div => {
                div.classList.add('hidden');
            });
            document.getElementById(pageId).classList.remove('hidden');
            currentPage = pageId;
        }
        
        function showOptions() {
            showPage('options');
        }
        
        function showAffirmations() {
            showPage('affirmations');
            nextAffirmation();
        }
        
        function showBreathing() {
            showPage('breathing');
        }
        
        function showMusic() {
            showPage('music');
            updateCurrentTrackDisplay();
        }
        
        function updateCurrentTrackDisplay() {
            const trackElement = document.getElementById('currentTrack');
            if (trackElement) {
                trackElement.textContent = `当前: ${musicLibrary[currentTrackIndex].name}`;
            }
        }
        
        function goBack() {
            if (currentPage === 'options') {
                showPage('welcome');
            } else {
                showPage('options');
            }
        }
        
        // 正能量语句切换
        function nextAffirmation() {
            currentAffirmation = (currentAffirmation + 1) % affirmations.length;
            document.getElementById('affirmationText').textContent = affirmations[currentAffirmation];
        }
        
        // 音乐库配置
        const musicLibrary = [
            { file: "796500.mp3", name: "轻音乐 1" },
            { file: "788974.mp3", name: "轻音乐 2" },
            { file: "127566.mp3", name: "轻音乐 3" },
            { file: "125566.mp3", name: "轻音乐 4" }
        ];
        
        let currentTrackIndex = 0;
        
        // 音乐控制
        function toggleMusic() {
            const audio = document.getElementById('bgAudio');
            const status = document.getElementById('musicStatus');
            
            if (!isPlaying) {
                playMusic();
            } else {
                audio.pause();
                status.textContent = '已暂停';
                isPlaying = false;
            }
        }
        
        function playMusic() {
            const audio = document.getElementById('bgAudio');
            const status = document.getElementById('musicStatus');
            const currentTrack = musicLibrary[currentTrackIndex];
            
            // 设置音频源
            audio.src = `https://github.com/firekylin2024/ease-anxiety/raw/main/music/${currentTrack.file}`;
            
            audio.play().then(() => {
                status.textContent = `${currentTrack.name}`;
                isPlaying = true;
            }).catch(error => {
                console.log('播放失败，尝试下一首:', error);
                nextTrack();
            });
        }
        
        function nextTrack() {
            currentTrackIndex = (currentTrackIndex + 1) % musicLibrary.length;
            updateCurrentTrackDisplay();
            if (isPlaying) {
                playMusic();
            }
        }
        
        // 音频事件监听
        function setupAudioEvents() {
            const audio = document.getElementById('bgAudio');
            
            audio.addEventListener('ended', () => {
                nextTrack();
            });
            
            audio.addEventListener('error', (e) => {
                console.log('音频加载失败，尝试下一首');
                nextTrack();
            });
            
            audio.addEventListener('loadstart', () => {
                document.getElementById('musicStatus').textContent = '加载中...';
            });
        }
        
        // 页面加载完成
        document.addEventListener('DOMContentLoaded', function() {
            setupAudioEvents();
            updateCurrentTrackDisplay();
        });
        
        // 页面卸载时清理
        window.addEventListener('beforeunload', function() {
            const audio = document.getElementById('bgAudio');
            if (audio) {
                audio.pause();
            }
        });
    </script>
</body>
</html>