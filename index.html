<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>心安处 - 焦虑缓解小站</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
            position: relative;
        }
        
        /* 背景装饰元素 */
        .bg-decoration {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }
        
        .floating-element {
            position: absolute;
            opacity: 0.1;
            animation: float 20s infinite linear;
        }
        
        .floating-element:nth-child(1) {
            top: 10%;
            left: 10%;
            font-size: 2rem;
            animation-delay: 0s;
        }
        
        .floating-element:nth-child(2) {
            top: 20%;
            right: 20%;
            font-size: 1.5rem;
            animation-delay: -5s;
        }
        
        .floating-element:nth-child(3) {
            bottom: 30%;
            left: 15%;
            font-size: 1.8rem;
            animation-delay: -10s;
        }
        
        .floating-element:nth-child(4) {
            top: 60%;
            right: 10%;
            font-size: 2.2rem;
            animation-delay: -15s;
        }
        
        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); }
            25% { transform: translateY(-20px) rotate(90deg); }
            50% { transform: translateY(-10px) rotate(180deg); }
            75% { transform: translateY(-15px) rotate(270deg); }
            100% { transform: translateY(0px) rotate(360deg); }
        }
        
        /* 音乐控制器 */
        .music-control {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255,255,255,0.15);
            padding: 8px 12px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .music-control:hover {
            background: rgba(255,255,255,0.25);
        }
        
        .music-btn {
            background: transparent;
            color: white;
            border: none;
            padding: 8px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
        }
        
        .music-btn:hover {
            background: rgba(255,255,255,0.2);
            transform: scale(1.1);
        }
        
        .music-btn.playing {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255,255,255,0.4); }
            70% { box-shadow: 0 0 0 8px rgba(255,255,255,0); }
            100% { box-shadow: 0 0 0 0 rgba(255,255,255,0); }
        }
        
        .music-info {
            color: white;
            font-size: 0.8rem;
            opacity: 0.9;
            white-space: nowrap;
        }
        
        .volume-control {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .volume-slider {
            width: 60px;
            height: 3px;
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
        }
        
        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
        }
        
        .volume-slider::-moz-range-thumb {
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }
        
        .page {
            height: 100vh;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
        }
        
        .page.active {
            display: flex;
        }
        
        /* 欢迎页面 */
        .welcome-page {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            text-align: center;
        }
        
        .welcome-content {
            color: white;
            max-width: min(500px, 90vw);
        }
        
        .welcome-title {
            font-size: clamp(2rem, 5vw, 2.5rem);
            margin-bottom: 20px;
            font-weight: 300;
            letter-spacing: 2px;
        }
        
        .welcome-subtitle {
            font-size: clamp(1.1rem, 3vw, 1.3rem);
            margin-bottom: 40px;
            opacity: 0.9;
            line-height: 1.5;
        }
        
        .start-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            padding: clamp(15px, 4vw, 20px) clamp(30px, 8vw, 40px);
            border-radius: 50px;
            font-size: clamp(1.1rem, 3vw, 1.2rem);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .start-btn:hover {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.5);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        
        /* 引导选择页面 */
        .guide-page {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            text-align: center;
        }
        
        .guide-content {
            color: white;
            max-width: min(450px, 90vw);
        }
        
        .guide-question {
            font-size: clamp(1.4rem, 4vw, 1.8rem);
            margin-bottom: clamp(30px, 8vw, 40px);
            font-weight: 300;
            line-height: 1.4;
        }
        
        .guide-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .guide-btn {
            background: white;
            color: #2c3e50;
            border: none;
            padding: clamp(16px, 4vw, 20px) clamp(25px, 6vw, 35px);
            border-radius: 50px;
            font-size: clamp(1rem, 2.5vw, 1.1rem);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .guide-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        /* 焦虑类型选择页面 */
        .selection-page {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }
        
        .header h1 {
            font-size: clamp(1.6rem, 4vw, 2rem);
            margin-bottom: 10px;
            font-weight: 300;
            letter-spacing: 1px;
        }
        
        .header p {
            font-size: clamp(1rem, 2.5vw, 1.1rem);
            opacity: 0.9;
            line-height: 1.4;
        }
        
        .cards-container {
            width: 100%;
            max-width: min(400px, 90vw);
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-height: 60vh;
            overflow-y: auto;
        }
        
        .card {
            background: white;
            border-radius: 16px;
            padding: 20px 18px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--accent-color);
        }
        
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.2);
        }
        
        .card-controllable { --accent-color: #4CAF50; }
        .card-semi-controllable { --accent-color: #FF9800; }
        .card-uncontrollable { --accent-color: #2196F3; }
        
        .character {
            font-size: 2.5rem;
            margin-bottom: 10px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }
        
        .card-title {
            font-size: clamp(1.1rem, 3vw, 1.3rem);
            font-weight: 600;
            margin-bottom: 6px;
            color: #2c3e50;
        }
        
        .card-subtitle {
            font-size: clamp(0.85rem, 2vw, 0.9rem);
            color: #7f8c8d;
            margin-bottom: 12px;
        }
        
        .examples {
            text-align: left;
            color: #5a6c7d;
            font-size: clamp(0.8rem, 1.8vw, 0.85rem);
            line-height: 1.4;
        }
        
        .examples ul {
            list-style: none;
            padding: 0;
        }
        
        .examples li {
            padding: 2px 0;
            position: relative;
            padding-left: 12px;
        }
        
        .examples li:before {
            content: '•';
            color: var(--accent-color);
            position: absolute;
            left: 0;
        }
        
        /* 放松模式页面 */
        .relax-page {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            text-align: center;
        }
        
        .relax-content {
            color: white;
            max-width: min(500px, 90vw);
        }
        
        .relax-title {
            font-size: clamp(1.8rem, 4.5vw, 2.2rem);
            margin-bottom: clamp(20px, 5vw, 30px);
            font-weight: 300;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .relax-subtitle {
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            margin-bottom: clamp(30px, 8vw, 40px);
            opacity: 0.9;
            line-height: 1.5;
        }
        
        .relax-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .relax-option {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: clamp(20px, 5vw, 25px) clamp(15px, 3vw, 20px);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            text-align: center;
        }
        
        .relax-option:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
        
        .relax-option .icon {
            font-size: 2rem;
            display: block;
            margin-bottom: 8px;
        }
        
        .relax-option .text {
            font-size: clamp(0.9rem, 2vw, 1rem);
            font-weight: 500;
        }
        
        /* 其他页面样式保持不变 */
        .affirmation-page {
            background: var(--page-bg);
            text-align: center;
        }
        
        .affirmation-content {
            max-width: min(600px, 90vw);
            color: white;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .affirmation-text {
            font-size: clamp(1.4rem, 4vw, 1.8rem);
            line-height: 1.5;
            margin-bottom: clamp(20px, 6vh, 40px);
            font-weight: 300;
            letter-spacing: 1px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .breathing-guide {
            font-size: clamp(1rem, 2.5vw, 1.1rem);
            opacity: 0.8;
            margin-bottom: clamp(15px, 4vh, 30px);
        }
        
        .breathing-circle {
            width: clamp(80px, 15vw, 100px);
            height: clamp(80px, 15vw, 100px);
            border: 3px solid rgba(255,255,255,0.5);
            border-radius: 50%;
            margin: 0 auto clamp(20px, 5vh, 40px);
            position: relative;
            animation: breathe 4s infinite;
        }
        
        @keyframes breathe {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.15); opacity: 1; }
        }
        
        .progress-bar {
            width: clamp(150px, 40vw, 200px);
            height: 4px;
            background: rgba(255,255,255,0.3);
            border-radius: 2px;
            margin: 0 auto;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: white;
            width: 0%;
            border-radius: 2px;
            animation: progress 15s linear;
            box-shadow: 0 0 10px rgba(255,255,255,0.5);
        }
        
        @keyframes progress {
            to { width: 100%; }
        }
        
        /* 返回按钮 */
        .back-btn {
            position: absolute;
            top: clamp(15px, 3vh, 30px);
            left: clamp(15px, 3vw, 30px);
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: clamp(8px, 2vw, 10px) clamp(12px, 3vw, 15px);
            border-radius: 20px;
            cursor: pointer;
            font-size: clamp(0.8rem, 2vw, 0.9rem);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .back-btn:hover {
            background: rgba(255,255,255,0.3);
        }
        
        /* 移动端优化 */
        @media (max-width: 768px) {
            .music-control {
                top: 15px;
                right: 15px;
                padding: 6px 10px;
            }
            
            .music-info {
                font-size: 0.75rem;
            }
            
            .volume-slider {
                width: 50px;
            }
        }
        
        /* 高度较小的屏幕优化 */
        @media (max-height: 600px) {
            .welcome-title {
                font-size: 1.8rem;
                margin-bottom: 15px;
            }
            
            .welcome-subtitle {
                font-size: 1rem;
                margin-bottom: 25px;
            }
        }
    </style>
</head>
<body>
    <!-- 背景装饰元素 -->
    <div class="bg-decoration">
        <div class="floating-element">🌸</div>
        <div class="floating-element">☁️</div>
        <div class="floating-element">🍃</div>
        <div class="floating-element">⭐</div>
    </div>
    
    <!-- 音乐控制器 -->
    <div class="music-control">
        <button class="music-btn" id="playBtn" onclick="toggleMusic()">▶️</button>
        <button class="music-btn" id="nextBtn" onclick="nextTrack()">⏭️</button>
        <div class="music-info" id="musicInfo">轻音乐 1</div>
        <div class="volume-control">
            <span style="color: white; font-size: 0.8rem;">🔊</span>
            <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="50" onchange="setVolume(this.value)">
        </div>
    </div>
    
    <!-- 隐藏的音频元素 -->
    <audio id="bgMusic" loop preload="metadata">
        <source src="https://github.com/firekylin2024/ease-anxiety/raw/main/music/796500.mp3" type="audio/mpeg">
    </audio>
    
    <!-- 页面1：欢迎页面 -->
    <div class="page welcome-page active" id="welcome">
        <div class="welcome-content">
            <h1 class="welcome-title">心安处</h1>
            <p class="welcome-subtitle">在这里，让心灵找到宁静<br>音乐与文字，陪伴你的每一刻</p>
            <button class="start-btn" onclick="startExperience()">点击开始，体验宁静时光 ✨</button>
        </div>
    </div>
    
    <!-- 页面2：引导选择 -->
    <div class="page guide-page" id="guide">
        <div class="guide-content">
            <div class="guide-question">此刻的你，心里有什么在困扰吗？</div>
            <div class="guide-options">
                <button class="guide-btn" onclick="selectPath('anxiety')">是的，有点焦虑 😔</button>
                <button class="guide-btn" onclick="selectPath('relax')">还好，只是想放松一下 😌</button>
            </div>
        </div>
    </div>
    
    <!-- 页面3：焦虑类型选择 -->
    <div class="page selection-page" id="selection">
        <button class="back-btn" onclick="goBack()">← 返回</button>
        <div class="header">
            <h1>这种困扰，你觉得...</h1>
            <p>选择最符合你内心感受的答案</p>
        </div>
        
        <div class="cards-container">
            <div class="card card-controllable" onclick="selectAnxietyType('controllable')">
                <div class="character">🌱</div>
                <h3 class="card-title">我觉得可以努力改变</h3>
                <p class="card-subtitle">像幼苗一样，用心浇灌成长</p>
                <div class="examples">
                    <ul>
                        <li>工作表现和学习成绩</li>
                        <li>人际沟通和社交技巧</li>
                        <li>生活习惯和时间管理</li>
                        <li>技能提升和能力培养</li>
                    </ul>
                </div>
            </div>
            
            <div class="card card-semi-controllable" onclick="selectAnxietyType('semi-controllable')">
                <div class="character">☯️</div>
                <h3 class="card-title">我能影响一部分</h3>
                <p class="card-subtitle">像太极师一样，顺势而为</p>
                <div class="examples">
                    <ul>
                        <li>健康状况和身体机能</li>
                        <li>工作机会和职业发展</li>
                        <li>亲密关系和家庭和谐</li>
                        <li>投资理财和经济状况</li>
                    </ul>
                </div>
            </div>
            
            <div class="card card-uncontrollable" onclick="selectAnxietyType('uncontrollable')">
                <div class="character">🌊</div>
                <h3 class="card-title">好像超出了我的控制</h3>
                <p class="card-subtitle">像大海一样，包容接纳一切</p>
                <div class="examples">
                    <ul>
                        <li>他人的想法和行为</li>
                        <li>过去发生的事情</li>
                        <li>未来的不确定性</li>
                        <li>自然环境和社会变化</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 页面4：放松模式 -->
    <div class="page relax-page" id="relax">
        <button class="back-btn" onclick="goBack()">← 返回</button>
        <div class="relax-content">
            <h1 class="relax-title">放松一下吧</h1>
            <p class="relax-subtitle">选择你喜欢的方式，让心灵得到片刻安宁</p>
            
            <div class="relax-options">
                <button class="relax-option" onclick="focusOnMusic()">
                    <span class="icon">🎵</span>
                    <span class="text">专心听音乐</span>
                </button>
                <button class="relax-option" onclick="showBreathing()">
                    <span class="icon">🫁</span>
                    <span class="text">深呼吸练习</span>
                </button>
                <button class="relax-option" onclick="showVisualRelax()">
                    <span class="icon">🌊</span>
                    <span class="text">视觉放松</span>
                </button>
                <button class="relax-option" onclick="readPositiveText()">
                    <span class="icon">✨</span>
                    <span class="text">温暖文字</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- 页面5：心理暗示 -->
    <div class="page affirmation-page" id="affirmation">
        <button class="back-btn" onclick="goBack()">← 返回</button>
        <div class="affirmation-content">
            <div class="affirmation-text" id="affirmationText">
                <!-- 暗示内容将由JS填入 -->
            </div>
            <div class="breathing-guide">深呼吸三次，让这句话慢慢沉入心里</div>
            <div class="breathing-circle"></div>
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
        </div>
    </div>
    
    <script>
        // 音乐管理
        const musicLibrary = [
            { file: "796500.mp3", name: "轻音乐 1" },
            { file: "788974.mp3", name: "轻音乐 2" },
            { file: "127566.mp3", name: "轻音乐 3" },
            { file: "125566.mp3", name: "轻音乐 4" }
        ];
        
        let currentTrackIndex = 0;
        let isPlaying = false;
        let currentAnxietyType = '';
        let currentPage = 'welcome';
        
        // 暗示语句库
        const affirmations = {
            controllable: [
                "我有能力通过努力改变现状",
                "每一个小步骤都在让我变得更好", 
                "我可以学习，我可以成长，我可以改变",
                "困难是我成长路上的垫脚石"
            ],
            'semi-controllable': [
                "我会尽我所能，然后平静接受结果",
                "有些事我能影响，有些事我需要顺应",
                "我专注于自己能控制的部分",
                "在变化中寻找平衡，在努力中保持从容"
            ],
            uncontrollable: [
                "这种感受是正常的，我允许它存在",
                "有些事情超出我的控制，我选择放下",
                "像大海一样，我可以包容一切",
                "接纳当下的自己，就是最大的勇气"
            ]
        };
        
        // 音乐控制函数
        function toggleMusic() {
            const audio = document.getElementById('bgMusic');
            const playBtn = document.getElementById('playBtn');
            
            if (!isPlaying) {
                audio.play().then(() => {
                    isPlaying = true;
                    playBtn.textContent = '⏸️';
                    playBtn.classList.add('playing');
                }).catch(e => {
                    console.log('音频播放失败:', e);
                });
            } else {
                audio.pause();
                isPlaying = false;
                playBtn.textContent = '▶️';
                playBtn.classList.remove('playing');
            }
        }
        
        function nextTrack() {
            currentTrackIndex = (currentTrackIndex + 1) % musicLibrary.length;
            loadTrack(currentTrackIndex);
        }
        
        function loadTrack(index) {
            const audio = document.getElementById('bgMusic');
            const musicInfo = document.getElementById('musicInfo');
            const track = musicLibrary[index];
            
            // 更新音频源（注意：需要替换为你的实际GitHub URL）
            audio.src = `https://github.com/firekylin2024/ease-anxiety/raw/main/music/${track.file}`;
            musicInfo.textContent = track.name;
            
            // 如果正在播放，切换到新音乐
            if (isPlaying) {
                audio.play().catch(e => console.log('音频播放失败:', e));
            }
        }
        
        function setVolume(value) {
            const audio = document.getElementById('bgMusic');
            audio.volume = value / 100;
        }
        
        // 页面导航函数
        function startExperience() {
            // 开始时自动播放音乐
            toggleMusic();
            switchPage('guide');
        }
        
        function selectPath(path) {
            if (path === 'anxiety') {
                switchPage('selection');
            } else {
                switchPage('relax');
            }
        }
        
        function selectAnxietyType(type) {
            currentAnxietyType = type;
            showAffirmation();
        }
        
        function showAffirmation() {
            const affirmationList = affirmations[currentAnxietyType];
            const randomAffirmation = affirmationList[Math.floor(Math.random() * affirmationList.length)];
            
            const page = document.getElementById('affirmation');
            const backgrounds = {
                controllable: 'linear-gradient(135deg, #4CAF50 0%, #45a049 100%)',
                'semi-controllable': 'linear-gradient(135deg, #FF9800 0%, #f57c00 100%)',
                uncontrollable: 'linear-gradient(135deg, #2196F3 0%, #1976d2 100%)'
            };
            page.style.setProperty('--page-bg', backgrounds[currentAnxietyType]);
            
            document.getElementById('affirmationText').textContent = randomAffirmation;
            switchPage('affirmation');
            
            // 15秒后自动返回选择页面或结束
            setTimeout(() => {
                alert('愿你今天过得更好一些 ✨\n记住，你已经很棒了！');
                switchPage('welcome');
            }, 15000);
        }
        
        // 放松模式功能
        function focusOnMusic() {
            alert('🎵 专心听音乐模式\n\n闭上眼睛，让音乐洗涤心灵\n建议听 3-5 分钟，感受内心的平静');
        }
        
        function showBreathing() {
            alert('🫁 深呼吸练习\n\n吸气 4 秒 - 屏息 7 秒 - 呼气 8 秒\n重复 5-10 次，感受身心的放松');
        }
        
        function showVisualRelax() {
            alert('🌊 视觉放松\n\n注视屏幕上飘浮的元素\n让思绪随着它们一起轻盈地飘浮');
        }
        
        function readPositiveText() {
            const positiveTexts = [
                "每一个当下都是全新的开始",
                "你比你想象的更坚强",
                "慢下来，生活会给你答案",
                "世界上最温柔的力量是内心的平静",
                "今天的你已经足够好了"
            ];
            const randomText = positiveTexts[Math.floor(Math.random() * positiveTexts.length)];
            alert(`✨ ${randomText} ✨\n\n让这句话在心中停留一会儿`);
        }
        
        function goBack() {
            const pageOrder = ['welcome', 'guide', 'selection', 'relax', 'affirmation'];
            const currentIndex = pageOrder.indexOf(currentPage);
            if (currentIndex > 0) {
                switchPage(pageOrder[currentIndex - 1]);
            }
        }
        
        function switchPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            document.getElementById(pageId).classList.add('active');
            currentPage = pageId;
            window.scrollTo(0, 0);
        }
        
        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 设置初始音量
            setVolume(50);
            
            // 加载第一首音乐
            loadTrack(0);
            
            // 音乐结束时自动下一首
            document.getElementById('bgMusic').addEventListener('ended', nextTrack);
        });
    </script>
</body>
</html>