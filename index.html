<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿ƒå®‰å¤„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            text-align: center;
            max-width: 500px;
            width: 100%;
        }
        
        .title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
            letter-spacing: 2px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 40px;
        }
        
        .card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .card:hover {
            background: rgba(255,255,255,0.15);
            transform: translateY(-5px);
        }
        
        .card h3 {
            font-size: 1.4rem;
            margin-bottom: 15px;
            font-weight: 400;
        }
        
        .card p {
            font-size: 1rem;
            opacity: 0.9;
            line-height: 1.5;
            margin-bottom: 20px;
        }
        
        .time-card {
            display: flex;
            align-items: center;
            justify-content: space-between;
            text-align: left;
            padding: 25px;
        }
        
        .time-info {
            flex: 1;
        }
        
        .time-number {
            font-size: 2.5rem;
            font-weight: 300;
            color: #fff;
            margin-bottom: 5px;
        }
        
        .time-desc {
            font-size: 0.9rem;
            opacity: 0.8;
            margin: 0;
        }
        
        .time-icon {
            font-size: 2rem;
            opacity: 0.7;
        }
        
        .btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin: 5px;
        }
        
        .btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
        
        .btn.primary {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.5);
        }
        
        .btn.primary:hover {
            background: rgba(255,255,255,0.4);
        }
        
        .affirmation {
            font-size: 1.3rem;
            font-weight: 300;
            line-height: 1.6;
            margin: 20px 0;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
        }
        
        .timer-display {
            font-size: 4rem;
            font-weight: 200;
            margin: 40px 0;
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
        }
        

        
        .breathing-hint {
            font-size: 1.1rem;
            opacity: 0.8;
            margin: 20px 0;
            font-style: italic;
        }
        
        .completion-message {
            font-size: 1.5rem;
            margin: 30px 0;
            padding: 25px;
            background: rgba(255,255,255,0.15);
            border-radius: 20px;
            border: 2px solid rgba(255,255,255,0.3);
        }
        
        .music-control {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            border-radius: 50px;
            padding: 10px 15px;
            backdrop-filter: blur(10px);
        }
        
        .music-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            margin: 0 5px;
        }
        
        .hidden { display: none; }
        
        @media (max-width: 600px) {
            .title { font-size: 2rem; }
            .card { padding: 20px; margin-bottom: 15px; }
            .timer-display { font-size: 3rem; }
        }
    </style>
    <script defer data-domain="serenecard.space" src="https://plausible.io/js/script.js"></script>

</head>
<body>
    <!-- éŸ³ä¹æ§åˆ¶ -->
    <div class="music-control">
        <button class="music-btn" onclick="toggleMusic()">ğŸµ</button>
        <span id="musicStatus">éŸ³ä¹</span>
    </div>
    
    <!-- ä¸»å®¹å™¨ -->
    <div class="container">
        <!-- æ¬¢è¿é¡µé¢ -->
        <div id="welcome">
            <h1 class="title">å¿ƒå®‰å¤„</h1>
            <p class="subtitle">è®©å¿ƒçµæ‰¾åˆ°ç‰‡åˆ»å®é™</p>
            
            <div class="card" onclick="showOptions()">
                <h3>ğŸŒ¸ å¼€å§‹æ”¾æ¾ä¹‹æ—…</h3>
                <p>åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥æ‰¾åˆ°å†…å¿ƒçš„å¹³é™</p>
                <button class="btn">ç‚¹å‡»å¼€å§‹</button>
            </div>
        </div>
        
        <!-- é€‰æ‹©é¡µé¢ -->
        <div id="options" class="hidden">
            <h2 style="margin-bottom: 30px;">ä½ å¸Œæœ›...</h2>
            
            <div class="card" onclick="showAffirmations()">
                <h3>ğŸ’š è·å¾—æ­£èƒ½é‡</h3>
                <p>ä¸€äº›æ¸©æš–çš„è¯è¯­ï¼Œç»™å¿ƒçµåŠ›é‡</p>
            </div>
            
            <div class="card" onclick="showBreathingSelect()">
                <h3>ğŸ« æ·±å‘¼å¸æ”¾æ¾</h3>
                <p>å°è¯•æ·±å‘¼å¸ç»ƒä¹ ï¼Œè®©èº«å¿ƒæ…¢ä¸‹æ¥</p>
            </div>
            
            <div class="card" onclick="showMusic()">
                <h3>ğŸµ å¬éŸ³ä¹å†¥æƒ³</h3>
                <p>åœ¨è½»æŸ”çš„éŸ³ä¹ä¸­æ‰¾åˆ°å®é™</p>
            </div>
            
            <button class="btn" onclick="goBack()">â† è¿”å›</button>
        </div>
        
        <!-- æ­£èƒ½é‡é¡µé¢ -->
        <div id="affirmations" class="hidden">
            <h2 style="margin-bottom: 20px;">âœ¨ ç»™è‡ªå·±ä¸€äº›é¼“åŠ±</h2>
            <div class="affirmation" id="affirmationText">
                ä½ å·²ç»å¾ˆåŠªåŠ›äº†ï¼Œç»™è‡ªå·±ä¸€ä¸ªæ¸©æš–çš„æ‹¥æŠ±å§
            </div>
            <button class="btn" onclick="nextAffirmation()">ä¸‹ä¸€å¥</button>
            <button class="btn" onclick="goBack()">â† è¿”å›</button>
        </div>
        
        <!-- å‘¼å¸ç»ƒä¹  - é€‰æ‹©æ—¶é•¿ -->
        <div id="breathing-select" class="hidden">
            <h2 style="margin-bottom: 30px;">ğŸ« é€‰æ‹©ç»ƒä¹ æ—¶é•¿</h2>
            
            <div class="card time-card" onclick="startBreathing(3)">
                <div class="time-info">
                    <div class="time-number">3åˆ†é’Ÿ</div>
                    <p class="time-desc">å¿«é€Ÿæ”¾æ¾ï¼Œé€‚åˆå·¥ä½œé—´éš™</p>
                </div>
                <div class="time-icon">âš¡</div>
            </div>
            
            <div class="card time-card" onclick="startBreathing(5)">
                <div class="time-info">
                    <div class="time-number">5åˆ†é’Ÿ</div>
                    <p class="time-desc">æ ‡å‡†ç»ƒä¹ ï¼Œæ—¥å¸¸å‡å‹é¦–é€‰</p>
                </div>
                <div class="time-icon">ğŸŒŸ</div>
            </div>
            
            <div class="card time-card" onclick="startBreathing(10)">
                <div class="time-info">
                    <div class="time-number">10åˆ†é’Ÿ</div>
                    <p class="time-desc">æ·±åº¦æ”¾æ¾ï¼Œç¡å‰æˆ–å‘¨æœ«ä½¿ç”¨</p>
                </div>
                <div class="time-icon">ğŸ§˜</div>
            </div>
            
            <button class="btn" onclick="goBack()">â† è¿”å›</button>
        </div>
        
        <!-- å‘¼å¸ç»ƒä¹  - å€’è®¡æ—¶è¿›è¡Œ -->
        <div id="breathing-timer" class="hidden">
            <h2 style="margin-bottom: 20px;">ğŸ« æ·±å‘¼å¸ç»ƒä¹ ä¸­</h2>
            
            <div class="timer-display" id="timerDisplay">5:00</div>
            
            <div class="breathing-hint" id="breathingHint">
                æ…¢æ…¢å‘¼å¸ï¼Œæ”¾æ¾èº«å¿ƒ
            </div>
            
            <div style="margin-top: 30px;">
                <button class="btn primary" id="pauseBtn" onclick="togglePause()">æš‚åœ</button>
                <button class="btn" onclick="stopBreathing()">ç»“æŸç»ƒä¹ </button>
            </div>
        </div>
        
        <!-- å‘¼å¸ç»ƒä¹ å®Œæˆ -->
        <div id="breathing-complete" class="hidden">
            <h2 style="margin-bottom: 20px;">ğŸ‰ ç»ƒä¹ å®Œæˆ</h2>
            
            <div class="completion-message">
                <div style="font-size: 3rem; margin-bottom: 15px;">âœ¨</div>
                <p>å¾ˆå¥½ï¼ä½ å·²ç»å®Œæˆäº†è¿™æ¬¡æ·±å‘¼å¸ç»ƒä¹ </p>
                <p style="margin-top: 10px; font-size: 0.9rem; opacity: 0.8;">
                    å¸Œæœ›ä½ æ„Ÿåˆ°æ›´åŠ æ”¾æ¾å’Œå¹³é™
                </p>
            </div>
            
            <div style="margin-top: 30px;">
                <button class="btn primary" onclick="showBreathingSelect()">å†æ¥ä¸€æ¬¡</button>
                <button class="btn" onclick="showOptions()">å…¶ä»–ç»ƒä¹ </button>
                <button class="btn" onclick="showPage('welcome')">å›åˆ°é¦–é¡µ</button>
            </div>
        </div>
        
        <!-- éŸ³ä¹é¡µé¢ -->
        <div id="music" class="hidden">
            <h2 style="margin-bottom: 20px;">ğŸµ éŸ³ä¹å†¥æƒ³</h2>
            <p>é—­ä¸Šçœ¼ç›ï¼Œè®©éŸ³ä¹å¸¦èµ°çƒ¦æ¼</p>
            <div style="margin: 30px 0;">
                <div style="font-size: 4rem; margin-bottom: 20px;">ğŸ¼</div>
                <p>å»ºè®®å†¥æƒ³ 5-10 åˆ†é’Ÿ</p>
                <p style="font-size: 0.9rem; opacity: 0.8; margin-top: 10px;" id="currentTrack">
                    å‡†å¤‡æ’­æ”¾è½»éŸ³ä¹
                </p>
            </div>
            <button class="btn" onclick="toggleMusic()">æ’­æ”¾/æš‚åœ</button>
            <button class="btn" onclick="nextTrack()">ä¸‹ä¸€é¦–</button>
            <button class="btn" onclick="goBack()">â† è¿”å›</button>
        </div>
    </div>
    
    <!-- éšè—éŸ³é¢‘ -->
    <audio id="bgAudio" loop>
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+jypoQfCS1+xLnp7e2" type="audio/wav">
    </audio>
    
    <script>
        // ç®€åŒ–çš„çŠ¶æ€ç®¡ç†
        let currentPage = 'welcome';
        let isPlaying = false;
        
        // å‘¼å¸ç»ƒä¹ çŠ¶æ€
        let breathingState = {
            phase: 'select',    // select | running | paused | completed
            duration: 0,        // æ€»æ—¶é•¿ï¼ˆç§’ï¼‰
            remaining: 0,       // å‰©ä½™æ—¶é—´ï¼ˆç§’ï¼‰
            timer: null,        // å®šæ—¶å™¨å¼•ç”¨
            startTime: 0,       // å¼€å§‹æ—¶é—´
            totalDuration: 0    // ç”¨äºè¿›åº¦è®¡ç®—
        };
        
        // æ­£èƒ½é‡è¯­å¥
        const affirmations = [
            "ä½ å·²ç»å¾ˆåŠªåŠ›äº†ï¼Œç»™è‡ªå·±ä¸€ä¸ªæ¸©æš–çš„æ‹¥æŠ±å§",
            "æ¯ä¸€ä¸ªä»Šå¤©ï¼Œéƒ½æ˜¯å…¨æ–°çš„å¼€å§‹",
            "ä½ æ¯”æƒ³è±¡ä¸­æ›´åšå¼ºï¼Œæ›´æœ‰éŸ§æ€§",
            "æ…¢ä¸‹æ¥ï¼Œç”Ÿæ´»ä¼šç»™ä½ ç­”æ¡ˆ",
            "æ­¤åˆ»çš„ä½ ï¼Œå·²ç»è¶³å¤Ÿå¥½äº†",
            "å›°éš¾åªæ˜¯æˆé•¿è·¯ä¸Šçš„å«è„šçŸ³",
            "ä½ å€¼å¾—è¢«çˆ±ï¼Œè¢«ç†è§£ï¼Œè¢«æ¸©æŸ”å¯¹å¾…",
            "åœ¨è¿™ä¸ªå½“ä¸‹ï¼Œä¸€åˆ‡éƒ½æ˜¯æœ€å¥½çš„å®‰æ’",
            "ç›¸ä¿¡è‡ªå·±ï¼Œä½ æœ‰æ— é™çš„å¯èƒ½æ€§",
            "æ¯ä¸€æ¬¡æ·±å‘¼å¸ï¼Œéƒ½åœ¨ä¸ºå¿ƒçµå……ç”µ"
        ];
        
        let currentAffirmation = 0;
        
        // é¡µé¢åˆ‡æ¢
        function showPage(pageId) {
            document.querySelectorAll('.container > div').forEach(div => {
                div.classList.add('hidden');
            });
            document.getElementById(pageId).classList.remove('hidden');
            currentPage = pageId;
        }
        
        function showOptions() {
            showPage('options');
        }
        
        function showAffirmations() {
            showPage('affirmations');
            nextAffirmation();
        }
        
        function showBreathingSelect() {
            showPage('breathing-select');
            // é‡ç½®å‘¼å¸ç»ƒä¹ çŠ¶æ€
            breathingState.phase = 'select';
            if (breathingState.timer) {
                clearInterval(breathingState.timer);
                breathingState.timer = null;
            }
        }
        
        function showMusic() {
            showPage('music');
            updateCurrentTrackDisplay();
        }
        
        function updateCurrentTrackDisplay() {
            const trackElement = document.getElementById('currentTrack');
            if (trackElement) {
                trackElement.textContent = `å½“å‰: ${musicLibrary[currentTrackIndex].name}`;
            }
        }
        
        function goBack() {
            if (currentPage === 'options') {
                showPage('welcome');
            } else if (currentPage === 'breathing-select' || currentPage === 'breathing-timer' || currentPage === 'breathing-complete') {
                showPage('options');
            } else {
                showPage('options');
            }
        }
        
        // æ­£èƒ½é‡è¯­å¥åˆ‡æ¢
        function nextAffirmation() {
            currentAffirmation = (currentAffirmation + 1) % affirmations.length;
            document.getElementById('affirmationText').textContent = affirmations[currentAffirmation];
        }
        
        // å‘¼å¸ç»ƒä¹ åŠŸèƒ½
        function startBreathing(minutes) {
            breathingState.duration = minutes * 60; // è½¬æ¢ä¸ºç§’
            breathingState.remaining = breathingState.duration;
            breathingState.totalDuration = breathingState.duration;
            breathingState.phase = 'running';
            breathingState.startTime = Date.now();
            
            showPage('breathing-timer');
            updateTimerDisplay();
            
            // å¼€å§‹å€’è®¡æ—¶
            breathingState.timer = setInterval(() => {
                breathingState.remaining--;
                updateTimerDisplay();
                updateBreathingHint();
                
                if (breathingState.remaining <= 0) {
                    completeBreathing();
                }
            }, 1000);
            
            // åˆå§‹æç¤º
            updateBreathingHint();
        }
        
        function togglePause() {
            const pauseBtn = document.getElementById('pauseBtn');
            
            if (breathingState.phase === 'running') {
                // æš‚åœ
                clearInterval(breathingState.timer);
                breathingState.phase = 'paused';
                pauseBtn.textContent = 'ç»§ç»­';
                document.getElementById('breathingHint').textContent = 'ç»ƒä¹ å·²æš‚åœ';
            } else if (breathingState.phase === 'paused') {
                // ç»§ç»­
                breathingState.phase = 'running';
                pauseBtn.textContent = 'æš‚åœ';
                breathingState.timer = setInterval(() => {
                    breathingState.remaining--;
                    updateTimerDisplay();
                    updateBreathingHint();
                    
                    if (breathingState.remaining <= 0) {
                        completeBreathing();
                    }
                }, 1000);
            }
        }
        
        function stopBreathing() {
            if (breathingState.timer) {
                clearInterval(breathingState.timer);
                breathingState.timer = null;
            }
            breathingState.phase = 'select';
            showBreathingSelect();
        }
        
        function completeBreathing() {
            if (breathingState.timer) {
                clearInterval(breathingState.timer);
                breathingState.timer = null;
            }
            breathingState.phase = 'completed';
            showPage('breathing-complete');
        }
        
        function updateTimerDisplay() {
            const minutes = Math.floor(breathingState.remaining / 60);
            const seconds = breathingState.remaining % 60;
            const display = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timerDisplay').textContent = display;
        }
        

        function updateBreathingHint() {
            const hints = [
                "æ…¢æ…¢å‘¼å¸ï¼Œæ”¾æ¾èº«å¿ƒ",
                "æ„Ÿå—å‘¼å¸çš„èŠ‚å¥",
                "è®©æ€ç»ªéšç€å‘¼å¸å¹³é™ä¸‹æ¥",
                "ä¸“æ³¨äºå½“ä¸‹è¿™ä¸€åˆ»",
                "é‡Šæ”¾å¿ƒä¸­çš„ç´§å¼ æ„Ÿ",
                "è®©æ¯ä¸€æ¬¡å‘¼å¸éƒ½å¸¦æ¥å¹³é™"
            ];
            
            // æ¯20ç§’æ›´æ¢ä¸€æ¬¡æç¤º
            const cycleTime = Math.floor((breathingState.totalDuration - breathingState.remaining) / 20);
            const hintIndex = cycleTime % hints.length;
            
            if (breathingState.phase === 'running') {
                document.getElementById('breathingHint').textContent = hints[hintIndex];
            }
        }
        
        // æ ¼å¼åŒ–æ—¶é—´æ˜¾ç¤º
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
        }
        
        // éŸ³ä¹åº“é…ç½®
        const musicLibrary = [
            { file: "796500.mp3", name: "è½»éŸ³ä¹ 1" },
            { file: "788974.mp3", name: "è½»éŸ³ä¹ 2" },
            { file: "127566.mp3", name: "è½»éŸ³ä¹ 3" },
            { file: "125566.mp3", name: "è½»éŸ³ä¹ 4" }
        ];
        
        let currentTrackIndex = 0;
        
        // éŸ³ä¹æ§åˆ¶
        function toggleMusic() {
            const audio = document.getElementById('bgAudio');
            const status = document.getElementById('musicStatus');
            
            if (!isPlaying) {
                playMusic();
            } else {
                audio.pause();
                status.textContent = 'å·²æš‚åœ';
                isPlaying = false;
            }
        }
        
        function playMusic() {
            const audio = document.getElementById('bgAudio');
            const status = document.getElementById('musicStatus');
            const currentTrack = musicLibrary[currentTrackIndex];
            
            // è®¾ç½®éŸ³é¢‘æº
            audio.src = `https://github.com/firekylin2024/ease-anxiety/raw/main/music/${currentTrack.file}`;
            
            audio.play().then(() => {
                status.textContent = `${currentTrack.name}`;
                isPlaying = true;
            }).catch(error => {
                console.log('æ’­æ”¾å¤±è´¥ï¼Œå°è¯•ä¸‹ä¸€é¦–:', error);
                nextTrack();
            });
        }
        
        function nextTrack() {
            currentTrackIndex = (currentTrackIndex + 1) % musicLibrary.length;
            updateCurrentTrackDisplay();
            if (isPlaying) {
                playMusic();
            }
        }
        
        // éŸ³é¢‘äº‹ä»¶ç›‘å¬
        function setupAudioEvents() {
            const audio = document.getElementById('bgAudio');
            
            audio.addEventListener('ended', () => {
                nextTrack();
            });
            
            audio.addEventListener('error', (e) => {
                console.log('éŸ³é¢‘åŠ è½½å¤±è´¥ï¼Œå°è¯•ä¸‹ä¸€é¦–');
                nextTrack();
            });
        }
        
        // é¡µé¢åŠ è½½å®Œæˆ
        document.addEventListener('DOMContentLoaded', function() {
            setupAudioEvents();
            updateCurrentTrackDisplay();
        });
        
        // é¡µé¢å¸è½½æ—¶æ¸…ç†
        window.addEventListener('beforeunload', function() {
            const audio = document.getElementById('bgAudio');
            if (audio) {
                audio.pause();
            }
            if (breathingState.timer) {
                clearInterval(breathingState.timer);
            }
        });
    </script>
<script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "ru7it5ny0j");
</script>
</body>
</html>